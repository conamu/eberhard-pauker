before_script:
- docker info

build-job:
  stage: build
  tags:
    - Docker
  script:
    - echo "Injecting Docker Credentials to .env..."
    - echo "DISCORD_TOKEN="$DISCORD_TOKEN >> bot/.env
    - echo "DISCORD_GUILD="$DISCORD_GUILD >> bot/.env
    - echo "Building Docker Image..."
    - docker build --tag "conamu470/eberhard-pauker" .

deploy-prod:
  stage: deploy
  tags:
    - Docker
  script:
    - echo "Logging in to Dockerhub..."
    - docker login -p $DOCKER_PW -u $DOCKER_UN
    - echo "Pushing Image to Dockerhub!"
    - docker push conamu470/eberhard-pauker
