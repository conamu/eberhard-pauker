before_script:
- docker info

build-job:
  stage: build
  tags:
    - Docker
  script:
    - echo "Injecting Docker Credentials to .env..."
    - echo $'\nDISCORD_TOKEN='$DISCORD_TOKEN >> bot/.env
    - echo $'\nDISCORD_GUILD='$DISCORD_GUILD >> bot/.env
    - echo "Logging in to Docker registry..."
    - docker login -u $DOCKER_PW -p $DOCKER_UN $CI_REGISTRY 
    - echo "Building Docker Image..."
    - docker build --tag $CI_REGISTRY/conamu/eberhard-pauker/eberhard-pauker:latest .
    - echo "Pushing Image to Registry!"
    - docker push $CI_REGISTRY/conamu/eberhard-pauker/eberhard-pauker:latest
