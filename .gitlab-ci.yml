before_script:
- docker info

build-job:
  stage: build
  tags:
    - Docker
  script:
    - echo "Injecting Docker Credentials to .env..."
    - echo $'\nDISCORD_TOKEN='$DISCORD_TOKEN >> bot/.env
    - echo $'\nDISCORD_GUILD='$DISCORD_GUILD >> bot/.env
    - echo "Logging in to Docker registry..."
    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $REGISTRY 
    - echo "Building Docker Image..."
    - docker build --tag $REGISTRY/conamu/eberhard-pauker/eberhard-pauker:latest .
    - echo "Pushing Image to Registry!"
    - docker push $REGISTRY/conamu/eberhard-pauker/eberhard-pauker:latest
